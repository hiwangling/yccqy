<style>
    .layui-form-item:after {
        content: '\20';
        clear: both;
        *zoom: 1;
        display: block;
        height: 0
    }

    .layui-input-block {
        margin-left: 110px;
        left: -1px
    }
</style>
<form id="formreserve">
    <div class="box">
      <div class="box-body">
        <div class="row">
         <!-- <div class="col-md-6">
            <div class="form-group">
              <label>编号</label>
              <input class="form-control" name="vno" value="{$info['vno']}" placeholder="请输入编号" type="text">
            </div>
          </div>!-->
 
          <div class="col-md-6">
            <div class="form-group">
              <label>墓区名称</label>
              <input class="form-control" name="name" value="{$info['name']}" placeholder="请输入墓区名称" type="text">
            </div>
          </div>
		  <div class="col-md-6">
            <div class="form-group">
              <label>墓园名称</label>
			  <span>（所属的墓园）</span>
              <select name="gardenID" class="form-control">
					{volist name='gardenlist' id='vo'}
					   <option value="{$vo['id']}" {notempty name="info['gardenID']"}{if condition="$info['gardenID'] eq $vo['id']"} selected="selected" {/if}{/notempty}>{$vo['name']}</option>
					{/volist}
                </select>
            </div>
          </div>
         <div class="col-md-6">
            <div class="form-group">
                <label>墓穴图片</label>
                <span class="">（请上传单张封面图片）</span>
                <br/>
                {assign name="cimage" value="$info.cimage|default='0'" /}
                {:widget('file/index', ['name' => 'cimage', 'value' => $cimage, 'type' => 'img'])}
            </div>
          </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label>墓穴瓷像规格</label>
                    <input class="form-control" id="vitrotype" name="vitrotype" value="{$info['vitrotype']}" placeholder="请选择墓穴对应瓷像规格"
                           type="text" readonly>
                </div>
            </div>
         
          <div class="col-md-6">
            <div class="form-group">
              <label>墓区描述</label>
			  <textarea class="form-control" name="vcdesc" rows="3" placeholder="请输入墓穴样式描述">{$info['vcdesc']}</textarea>
			  <input type="hidden" name="id" value="{$info['id']|default='0'}"/>
            </div>
          </div>
        </div>
      </div>
        
      
    </form>
        
      <div class="modal-footer"  >  
        <a   href="javascript:" onclick="cemeteryGardenedit_ajax_submit();"  type="button"  class="btn btn-default"><span class="ladda-label"><i class="fa fa-check"></i> 提交</span></a>
        <a type="button" class="btn btn-default" data-dismiss="modal"> <span class="ladda-label"><i class="fa fa-close"></i> 关闭</span></a>
      </div>
        
        
    </div>
<script>
    $(function () {
        var jsonObj;
        $.ajax({
            url: "{:url('cemetery/selectconfig_ajax')}",
            async: false,//请求是否异步，默认为异步，这也是ajax重要特性
            type: "POST",   //请求方式
            success: function (req) {
                jsonObj = JSON.parse(req);

            },
        });
        /*瓷像的点击弹框事件*/
        $("#vitrotype").click(function () {
            //不为空的时候返现
            var html = ' <div  class="layui-form-item">\n' +
                '    <label style="font-size:18px;text-align: left">瓷像规格配置</label>\n' +
                '    <div class="layui-input-block" style="margin-left: 1%;">\n';
            var vitrotypeData = $("#vitrotype").val();
            vitrotypeData = vitrotypeData.split('、');
            console.log(jsonObj);
            for (var j=0;j<jsonObj.length;j++) {
                console.log(j);
                var num = j % 2 ; //用来判断是否是双数，双数则表示换行

                if (vitrotypeData.indexOf(jsonObj[j]) != -1) {
                    if (num == 0) {
                        html += '<input type="checkbox" checked id="" name="checkboxA" style="zoom:150%" value=' + jsonObj[j] + ' ><span style="font-size:17px">' + jsonObj[j] + '</span>&emsp;&emsp;\n';
                    } else {
                        html += '<input type="checkbox" checked name="checkboxA"  style="zoom:150%" value=' + jsonObj[j] + '><span style="font-size:17px">' + jsonObj[j] + '</span><br/>';
                    }
                } else {
                    if (num == 0) {
                        html += '<input type="checkbox"  id="" name="checkboxA" style="zoom:150%" value=' + jsonObj[j] + ' ><span style="font-size:17px">' + jsonObj[j] + '</span>&emsp;&emsp;\n';
                    } else {
                        html += '<input type="checkbox"  name="checkboxA"  style="zoom:150%" value=' + jsonObj[j] + '><span style="font-size:17px">' + jsonObj[j] + '</span><br/>';
                    }
                }
            }

            html += '</div>\n' +
                '</div>';
            layer.confirm(html, {
                area: ['500px', '400px'], btn: ['确定', '取消'] //按钮
            }, function () {
                objA = document.getElementsByName("checkboxA");
                check_A = [];
                for ( var k = 0 ;k<objA.length ;k++) {
                    if (objA[k].checked)
                        check_A.push(objA[k].value);
                }
                console.log(check_A);
                var vitrotype = '';
                if (check_A != null && check_A != '') { //判断是否选中选中则存到vitrotype
                    for (var i = 0 ;i< check_A.length;i++) {
                        vitrotype += "、" + check_A[i];
                    }

                }
                console.log(vitrotype);
                vitrotype = vitrotype.substr(1, vitrotype.length);
                $("#vitrotype").val(vitrotype);
                /* layer.msg('操作成功！', {icon: 1});*/
                layer.closeAll();

            }, function () {
                //取消
            });



        })


    })


</script>